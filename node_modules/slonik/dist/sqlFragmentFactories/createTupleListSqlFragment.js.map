{"version":3,"sources":["../../src/sqlFragmentFactories/createTupleListSqlFragment.js"],"names":["token","greatestParameterPosition","values","placeholderIndex","tupleListMemberSql","lastTupleSize","tuple","tuples","placeholders","length","UnexpectedStateError","member","push","join","sql"],"mappings":";;;;;;;AAMA;;oCAIgBA,K,EAA8BC,yB,KAAuD;AACnG,QAAMC,MAAM,GAAG,EAAf;AAEA,MAAIC,gBAAgB,GAAGF,yBAAvB;AAEA,QAAMG,kBAAkB,GAAG,EAA3B;AAEA,MAAIC,aAAJ;;AAEA,OAAK,MAAMC,KAAX,IAAoBN,KAAK,CAACO,MAA1B,EAAkC;AAChC,UAAMC,YAAY,GAAG,EAArB;;AAEA,QAAIF,KAAK,CAACG,MAAN,KAAiB,CAArB,EAAwB;AACtB,YAAM,IAAIC,4BAAJ,CAAyB,oCAAzB,CAAN;AACD;;AAED,QAAI,OAAOL,aAAP,KAAyB,QAAzB,IAAqCA,aAAa,KAAKC,KAAK,CAACG,MAAjE,EAAyE;AACvE,YAAM,IAAIC,4BAAJ,CAAyB,sEAAzB,CAAN;AACD;;AAEDL,IAAAA,aAAa,GAAGC,KAAK,CAACG,MAAtB;;AAEA,SAAK,MAAME,MAAX,IAAqBL,KAArB,EAA4B;AAC1BE,MAAAA,YAAY,CAACI,IAAb,CAAkB,MAAM,EAAET,gBAA1B;AAEAD,MAAAA,MAAM,CAACU,IAAP,CAAYD,MAAZ;AACD;;AAEDP,IAAAA,kBAAkB,CAACQ,IAAnB,CAAwB,MAAMJ,YAAY,CAACK,IAAb,CAAkB,IAAlB,CAAN,GAAgC,GAAxD;AACD;;AAED,QAAMC,GAAG,GAAGV,kBAAkB,CAACS,IAAnB,CAAwB,IAAxB,CAAZ;AAEA,SAAO;AACLC,IAAAA,GADK;AAELZ,IAAAA;AAFK,GAAP;AAID,C","sourcesContent":["// @flow\n\nimport type {\n  SqlFragmentType,\n  TupleListSqlTokenType\n} from '../types';\nimport {\n  UnexpectedStateError\n} from '../errors';\n\nexport default (token: TupleListSqlTokenType, greatestParameterPosition: number): SqlFragmentType => {\n  const values = [];\n\n  let placeholderIndex = greatestParameterPosition;\n\n  const tupleListMemberSql = [];\n\n  let lastTupleSize;\n\n  for (const tuple of token.tuples) {\n    const placeholders = [];\n\n    if (tuple.length === 0) {\n      throw new UnexpectedStateError('Tuple must have at least 1 member.');\n    }\n\n    if (typeof lastTupleSize === 'number' && lastTupleSize !== tuple.length) {\n      throw new UnexpectedStateError('Each tuple in a list of tuples must have an equal number of members.');\n    }\n\n    lastTupleSize = tuple.length;\n\n    for (const member of tuple) {\n      placeholders.push('$' + ++placeholderIndex);\n\n      values.push(member);\n    }\n\n    tupleListMemberSql.push('(' + placeholders.join(', ') + ')');\n  }\n\n  const sql = tupleListMemberSql.join(', ');\n\n  return {\n    sql,\n    values\n  };\n};\n"],"file":"createTupleListSqlFragment.js"}