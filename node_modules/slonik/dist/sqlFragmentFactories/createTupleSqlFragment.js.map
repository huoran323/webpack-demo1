{"version":3,"sources":["../../src/sqlFragmentFactories/createTupleSqlFragment.js"],"names":["token","greatestParameterPosition","values","placeholders","placeholderIndex","length","UnexpectedStateError","tupleValue","push","sql","join"],"mappings":";;;;;;;AAMA;;gCAIgBA,K,EAA0BC,yB,KAAuD;AAC/F,QAAMC,MAAM,GAAG,EAAf;AACA,QAAMC,YAAY,GAAG,EAArB;AAEA,MAAIC,gBAAgB,GAAGH,yBAAvB;;AAEA,MAAID,KAAK,CAACE,MAAN,CAAaG,MAAb,KAAwB,CAA5B,EAA+B;AAC7B,UAAM,IAAIC,4BAAJ,CAAyB,oCAAzB,CAAN;AACD;;AAED,OAAK,MAAMC,UAAX,IAAyBP,KAAK,CAACE,MAA/B,EAAuC;AACrCC,IAAAA,YAAY,CAACK,IAAb,CAAkB,MAAM,EAAEJ,gBAA1B;AAEAF,IAAAA,MAAM,CAACM,IAAP,CAAYD,UAAZ;AACD;;AAED,QAAME,GAAG,GAAG,MAAMN,YAAY,CAACO,IAAb,CAAkB,IAAlB,CAAN,GAAgC,GAA5C;AAEA,SAAO;AACLD,IAAAA,GADK;AAELP,IAAAA;AAFK,GAAP;AAID,C","sourcesContent":["// @flow\n\nimport type {\n  SqlFragmentType,\n  TupleSqlTokenType\n} from '../types';\nimport {\n  UnexpectedStateError\n} from '../errors';\n\nexport default (token: TupleSqlTokenType, greatestParameterPosition: number): SqlFragmentType => {\n  const values = [];\n  const placeholders = [];\n\n  let placeholderIndex = greatestParameterPosition;\n\n  if (token.values.length === 0) {\n    throw new UnexpectedStateError('Tuple must have at least 1 member.');\n  }\n\n  for (const tupleValue of token.values) {\n    placeholders.push('$' + ++placeholderIndex);\n\n    values.push(tupleValue);\n  }\n\n  const sql = '(' + placeholders.join(', ') + ')';\n\n  return {\n    sql,\n    values\n  };\n};\n"],"file":"createTupleSqlFragment.js"}