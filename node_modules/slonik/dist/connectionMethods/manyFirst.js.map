{"version":3,"sources":["../../src/connectionMethods/manyFirst.js"],"names":["manyFirst","log","connection","clientConfigurationType","rawSql","values","inheritedQueryId","queryId","rows","length","error","DataIntegrityError","keys","Object","firstColumnName","map","row"],"mappings":";;;;;;;AAEA;;AAGA;;AAMA;;;;AAEA,MAAMA,SAA6C,GAAG,OAAOC,GAAP,EAAYC,UAAZ,EAAwBC,uBAAxB,EAAiDC,MAAjD,EAAyDC,MAAzD,EAAiEC,gBAAjE,KAAsF;AAC1I,QAAMC,OAAO,GAAGD,gBAAgB,IAAI,+BAApC;AAEA,QAAME,IAAI,GAAG,MAAM,mBAAKP,GAAL,EAAUC,UAAV,EAAsBC,uBAAtB,EAA+CC,MAA/C,EAAuDC,MAAvD,EAA+DE,OAA/D,CAAnB;;AAEA,MAAIC,IAAI,CAACC,MAAL,KAAgB,CAApB,EAAuB;AACrBR,IAAAA,GAAG,CAACS,KAAJ,CAAU;AACRH,MAAAA;AADQ,KAAV,EAEG,oBAFH;AAIA,UAAM,IAAII,0BAAJ,EAAN;AACD;;AAED,QAAMC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYJ,IAAI,CAAC,CAAD,CAAhB,CAAb;;AAEA,MAAII,IAAI,CAACH,MAAL,KAAgB,CAApB,EAAuB;AACrBR,IAAAA,GAAG,CAACS,KAAJ,CAAU;AACRH,MAAAA;AADQ,KAAV,EAEG,oBAFH;AAIA,UAAM,IAAII,0BAAJ,EAAN;AACD;;AAED,QAAMG,eAAe,GAAGF,IAAI,CAAC,CAAD,CAA5B;AAEA,SAAOJ,IAAI,CAACO,GAAL,CAAUC,GAAD,IAAS;AACvB,WAAOA,GAAG,CAACF,eAAD,CAAV;AACD,GAFM,CAAP;AAGD,CA5BD;;eA8Bed,S","sourcesContent":["// @flow\n\nimport {\n  createQueryId\n} from '../utilities';\nimport {\n  DataIntegrityError\n} from '../errors';\nimport type {\n  InternalQueryManyFirstFunctionType\n} from '../types';\nimport many from './many';\n\nconst manyFirst: InternalQueryManyFirstFunctionType = async (log, connection, clientConfigurationType, rawSql, values, inheritedQueryId) => {\n  const queryId = inheritedQueryId || createQueryId();\n\n  const rows = await many(log, connection, clientConfigurationType, rawSql, values, queryId);\n\n  if (rows.length === 0) {\n    log.error({\n      queryId\n    }, 'DataIntegrityError');\n\n    throw new DataIntegrityError();\n  }\n\n  const keys = Object.keys(rows[0]);\n\n  if (keys.length !== 1) {\n    log.error({\n      queryId\n    }, 'DataIntegrityError');\n\n    throw new DataIntegrityError();\n  }\n\n  const firstColumnName = keys[0];\n\n  return rows.map((row) => {\n    return row[firstColumnName];\n  });\n};\n\nexport default manyFirst;\n"],"file":"manyFirst.js"}